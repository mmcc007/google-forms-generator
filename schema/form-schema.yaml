# Google Forms YAML Schema Definition
# This schema defines the structure for creating Google Forms from YAML files

$schema: "http://json-schema.org/draft-07/schema#"
title: GoogleFormSchema
description: Schema for defining Google Forms in YAML format
type: object

required:
  - title

properties:
  title:
    type: string
    description: The title of the form

  description:
    type: string
    description: Optional description shown at the top of the form

  settings:
    type: object
    properties:
      collectEmail:
        description: Collect respondent email (true = verified, 'input' = user enters)
        oneOf:
          - type: boolean
          - type: string
            enum: [verified, input]

  # Option 1: Use pages for multi-page forms (creates actual page breaks)
  pages:
    type: array
    description: Multi-page form with page breaks between each page
    items:
      $ref: "#/definitions/page"

  # Option 2: Use sections for visual grouping (no page breaks, just headers)
  sections:
    type: array
    description: Sections to organize questions (no page breaks)
    items:
      $ref: "#/definitions/section"

  # Option 3: Flat list of questions (simplest)
  questions:
    type: array
    description: List of questions (use if not using pages or sections)
    items:
      $ref: "#/definitions/question"

definitions:
  page:
    type: object
    description: A page in the form (creates a page break before it, except for the first page)
    required:
      - title
      - questions
    properties:
      title:
        type: string
        description: Title shown at the top of the page
      description:
        type: string
        description: Description shown below the page title
      questions:
        type: array
        items:
          $ref: "#/definitions/question"

  section:
    type: object
    description: A visual section (header only, no page break)
    required:
      - title
      - questions
    properties:
      title:
        type: string
      description:
        type: string
      questions:
        type: array
        items:
          $ref: "#/definitions/question"

  question:
    type: object
    required:
      - type
      - title
    properties:
      type:
        type: string
        enum:
          - text
          - paragraph
          - multipleChoice
          - checkbox
          - dropdown
          - scale
          - date
          - time
          - rating
          - grid
          - checkboxGrid
          - title  # Section header (no input field, no page break)

      title:
        type: string
        description: The question text

      description:
        type: string
        description: Optional help text below the question

      required:
        type: boolean
        default: false

      # For multipleChoice, checkbox, dropdown
      options:
        type: array
        items:
          type: string

      # For scale
      scale:
        type: object
        properties:
          min:
            type: integer
            default: 1
          max:
            type: integer
            default: 5
          minLabel:
            type: string
          maxLabel:
            type: string

      # For date
      includeTime:
        type: boolean
        default: false

      # For time
      duration:
        type: boolean
        default: false
        description: If true, collects duration instead of time of day

      # For rating
      ratingScale:
        type: integer
        minimum: 3
        maximum: 10
        default: 5
        description: Number of rating levels (3-10)

      icon:
        type: string
        enum: [star, heart, thumbUp]
        default: star
        description: Icon to use for rating

      # For grid/checkboxGrid
      rows:
        type: array
        items:
          type: string

      columns:
        type: array
        items:
          type: string
